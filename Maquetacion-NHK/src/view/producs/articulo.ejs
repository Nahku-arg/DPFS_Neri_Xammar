<!DOCTYPE html>
<html lang="es">
<%- include('../partials/head/head', {styles: ['/styles/articulo.css']}) %>
<body>

    <%- include('../partials/header/header') %>
    
    <div class="imagenes">
        <div>
            <img src="/<%= producto.image %>" alt="<%= producto.name %>">
        </div>
        <div class="comprar">
            <h2 class="titulo"><%= producto.name %></h2>
            <p class="descripcion"><%= producto.description %></p>
            <p class="precio">$<%= Number(producto.price).toLocaleString() %></p>
            <button type="button" id="btn-comprar">Comprar</button>

            <script>
                document.getElementById('btn-comprar').addEventListener('click', () => {
                    const producto = {
                        id: '<%= producto.id %>',
                        nombre: '<%= producto.name %>',
                        precio: '<%= producto.price %>',
                        imagen: '<%= producto.image %>'
                    };
                let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
                const existe = carrito.find(p => p.id === producto.id);
                if (existe) {
                    existe.cantidad += 1;
                } else {
                    carrito.push({ ...producto, cantidad: 1 });
                }
                localStorage.setItem('carrito', JSON.stringify(carrito));
                alert('Producto agregado al carrito âœ“');
                });
            </script>
        </div>
    </div>
    <%- include('../partials/footer/footer') %>
</body>
</html>